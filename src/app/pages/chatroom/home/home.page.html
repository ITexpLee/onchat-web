<ion-content appHideScrollbar [fullscreen]="true" [scrollEvents]="true" (ionScroll)="onScroll($event)">
  <ion-header class="display-flex align-items-center" slot="fixed">
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-back-button text="&nbsp;" defaultHref="home"></ion-back-button>
      </ion-buttons>

      <ion-title [ngClass]="{hidden: !showMask}">{{ chatroom.name }}</ion-title>

      <ion-buttons slot="end">
        <ion-button>
          <ion-icon slot="icon-only" name="ellipsis-vertical" style="font-size: 1.5rem;"></ion-icon>
        </ion-button>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <div class="home-header" [ngClass]="{'show-mask': showMask}" (tap)="presentActionSheet()">
    <!-- <img class="home-header-img" src="https://blog.hypergo.net/images/banner/yein.jpg"> -->
    <img class="home-header-img" [src]="chatroom.avatar">
    <div class="home-header-mask"></div>
    <div class="home-header-info">
      <div class="home-header-title font-weight-bold overflow-ellipsis">{{ chatroom.name }}</div>
      <div class="home-header-subtitle">
        ROOM-ID：{{ chatroom.id }}&nbsp;&nbsp;
        成员：{{ memberCount }}/{{ chatroom.maxPeopleNum }}
      </div>
    </div>
  </div>

  <div class="home-info">
    <div class="home-info-item">
      {{ chatroom.description || '暂无聊天室简介' }}
    </div>
    <div class="home-info-item">
      该聊天室于{{ chatroom.createTime | date: 'yyyy年MM月dd日' }}创建
    </div>
  </div>

  <div class="home-item">
    <div class="home-info-label">聊天室成员</div>
    <div class="avatar-list-track">
      <ng-container *ngFor="let item of chatMembers | slice: 0:6">
        <img class="avatar-list-img cursor-pointer" [src]="item.avatarThumbnail" [routerLink]="'/user/' + item.userId">
      </ng-container>

      <!-- 如果不够6个，就填充一些空元素来维持UI -->
      <ng-container *ngIf="chatMembers.length < 6">
        <div *ngFor="let item of getArr(6 - chatMembers.length)" class="avatar-list-img"></div>
      </ng-container>

      <button class="add-btn ion-activatable ripple-container" (tap)="inviteJoinChatroom()">
        <ion-icon name="add-outline"></ion-icon>
        <ion-ripple-effect></ion-ripple-effect>
      </button>
    </div>
  </div>

  <div style="height: 100vh;">TEST</div>

  <aside class="bottom-bar">
    <button *ngIf="isMember" appActiveClass [appActiveClassDuration]="250" [routerLink]="['/chat', chatroom.id]"
      class="ion-activatable ripple-container btn-primary btn-block">
      进去聊聊
      <ion-ripple-effect></ion-ripple-effect>
    </button>

    <button *ngIf="!isMember" appActiveClass [appActiveClassDuration]="250" (tap)="request()"
      class="ion-activatable ripple-container btn-primary btn-block">
      申请加入
      <ion-ripple-effect></ion-ripple-effect>
    </button>
  </aside>
</ion-content>